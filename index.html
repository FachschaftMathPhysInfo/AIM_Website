<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="description" content="Die fern-ArbeitengruppenInspirationsMesse (fAIM) der Fachschaft MathPhysInfo" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>fAIM &middot; Fachschaft MathPhysInfo</title>
    <script src="jquery-3.5.1.min.js"></script>
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="bulma-0.9.1.min.css">
    <link rel="stylesheet" href="styles.css">
    <script>
    var DEFAULT_LANG = "de";
    var PAGE_LANG = DEFAULT_LANG;

    function getGroupsFromField(data, fieldID, lang) {
        var items = [];
        // get properties from JSON file
        $.each( data.groups, function( key, obj ) {
            if (obj.field == fieldID) {
                // image
                var img = "";
                if (obj.hasOwnProperty("image")){
                    img = "<img src='" + obj.image + "' />";
                }
                // description text
                var text = obj.text;
                if (text.hasOwnProperty(lang)) {
                    text = text[lang];
                } else if (text.hasOwnProperty(DEFAULT_LANG)) {
                    text = text[DEFAULT_LANG]; // set to default language
                }
                // url to group website
                var link = obj.profs;
                if (obj.hasOwnProperty("link")){
                    link = "<a href='" + obj.link + "' target='_" + key + "'>" + obj.profs + "</a>";
                }
                items.push( "<div class='group-item' id='" + key + "'>"
                + "<div class='group-title'><h3>" + obj.name + "</h3></div>"
                + "<div class='group-name'>" + link + "</div>"
                + "<div class='columns is-desktop'>"
                + "<div class='column is-two-thirds-desktop text'><p>" + text + "</p></div>"
                + "<div class='column img-container'>" + img + "</div>"
                + "</div></div>" );
            }
        });
        // append object to ul
        $( "<ul/>", {
            "class": "my-new-list",
            html: items.join( "" )
        }).appendTo( "#groups" );

        return items.length;
    }

    function fieldHeader(data, fieldID, lang) {
        var obj = data.fields[fieldID];
        $( "#groups" ).append(
            "<div class='columns field-header'>"
            + "<div class='column is-narrow'><div class='icon-container'><img src='icons/" + obj.icon + "' width='131px'/></div></div>"
            + "<div class='column'><h2 id='" + fieldID + "'>" + obj.name[lang] + "</h2><p>&nbsp;</p></div>"
            + "</div>"
        );
    }

    function setIcons(data) {
        var items = [];
        $.each( data.fields, function( key, obj ) {
            items.push( "<div class='column is-narrow field-icon' id='icon-" + key + "'>"
            + "<a href='#" + key + "'><div class='icon-container'><img src='icons/" + obj.icon + "' width='131px' /></div>"
            + "<p class='icon-desc'></p></a></div>" );
        });
        $( "#fields" ).append(items.join( "" ));
    }

    function setIconLabels(data, lang) {
        $.each( data.fields, function( key, obj ) {
            $( "#icon-" + key + " p.icon-desc" ).text(obj.name[lang]);
        });
    }

    $( document ).ready(function() {
        var ilen;
        $.getJSON( "groups_test.json", function( datag ) {
            $.getJSON( "fields.json", function( data ) {
                setIcons(data);
                setIconLabels(data, DEFAULT_LANG);
                setLanguage("de");
                $.each( data.fields, function( key, obj ) {
                    fieldHeader(data,key,DEFAULT_LANG);
                    ilen = getGroupsFromField(datag,key,DEFAULT_LANG);
                    if (ilen==0) {
                        $( "#groups" ).append('<div class="group-item"><p><i>noch keine Gruppen registriert</i></p></div>')
                    }
                });
            });
        });
    });

    function setLanguage(lang) {
        if (lang == "de") {
            $( "#aim-welcome-en" ).css('display','none');
            $( "#aim-title-en" ).css('display','none');
            $( "#aim-welcome-de" ).css('display','block');
            $( "#aim-title-de" ).css('display','block');            
        } else if (lang == "en") {
            $( "#aim-welcome-de" ).css('display','none');
            $( "#aim-title-de" ).css('display','none');
            $( "#aim-welcome-en" ).css('display','block');
            $( "#aim-title-en" ).css('display','block');
        }
        $.getJSON( "fields.json", function( data ) {
            setIconLabels(data, lang);
            $( '#groups' ).html('');
            $.getJSON( "groups_test.json", function( datag ) {
                $.each( data.fields, function( key, obj ) {
                    fieldHeader(data,key,lang);
                    ilen = getGroupsFromField(datag,key,lang);
                    if (ilen==0) {
                        $( "#groups" ).append('<div class="group-item"><p><i>noch keine Gruppen registriert</i></p></div>')
                    }
                });
            });
        });
    }
    </script>
</head>
<body>
<div id="page-content">
<!-- Header -->
<div id="header">
    <div id="lang-menu">
        <p><a id="lang-de"><img src="de.svg" width="18px" /> Deutsch</a> &middot; <a id="lang-en"><img src="en.svg" width="22px" /> English</a></p>
        <script>
            $( "a#lang-de" ).click(function() {
                setLanguage("de");
            });
            $( "a#lang-en" ).click(function() {
                setLanguage("en");
            });
        </script>
    </div>
    <div id="aim-title-de" class="aim-title">
        <h1>Herzlich Willkommen bei der fAIM!</h1>
        <h3>fern-ArbeitsgruppenInspitationsMesse</h3>
    </div>
    <div id="aim-title-en" class="aim-title">
        <h1>Welcome to fAIM!</h1>
        <h3>Online Working Group Fair</h3>
    </div>
    <div id="aim-welcome-de">
        <p>Wir, die <a href="https://mathphys.info">Fachschaft MathPhysInfo</a>, möchten euch herzlich auf der Website der fern-ArbeitsgruppenInspitationsMesse (fAIM) begrüßen.</p>
        <p>Zunächst die Eckdaten:</p>
        <table id="faq-table">
            <tr>
                <td class="question">Wann?</td>
                <td>Donnerstag, <b>28. Januar 2021, ab 14:00 Uhr</b></td>
            </tr>
            <tr>
                <td class="question">Wo?</td>
                <td>Online auf Zoom (der Raum wird rechtzeitig hier verlinkt werden)</td>
            </tr>
            <tr>
                <td class="question">Für wen?</td>
                <td>Für <b>alle</b> Studierenden der Fächer Physik und Technische Informatik,<br />egal ob im 1. Semester oder kurz vor der Masterarbeit!</td>
            </tr>
            <tr>
                <td class="question">Anmeldung?</td>
                <td>Für Studierende nicht notwendig!</td>
            </tr>
        </table>
        <p>Hier findet ihr demnächst einen Überblick über die Arbeitsgruppen, die sich für die Messe angemeldet haben. Stay tuned!</p>
    </div>
    <div id="aim-welcome-en">
        <p>We, the student representatives (<a href="https://mathphys.info">Fachschaft MathPhysInfo</a>) would like to welcome you on the website of this year's working group fair, which will take place online.</p>
        <p>First things first:</p>
        <table id="faq-table">
            <tr>
                <td class="question">When?</td>
                <td>Thursday, <b>Januar 28, 2021, starting at 2&nbsp;p.m.</b></td>
            </tr>
            <tr>
                <td class="question">Where?</td>
                <td>Online via Zoom (link will be posted here before the event)</td>
            </tr>
            <tr>
                <td class="question">For whom?</td>
                <td>All students from Physics and Computer Engineering are welcome!</td>
            </tr>
            <tr>
                <td class="question">Registration?</td>
                <td>Not necessary! (for students)</td>
            </tr>
        </table>
        <p>Here, you will be able to find an overview of all working groups which have announced their participation so far. Stay tuned!</p>
    </div>
</div>
<!-- Overview of reasearch fields -->
<div class="columns is-multiline is-centered" id="fields">
</div>
<!-- Boxes for each group -->
<!--<div id="groups">
</div> -->
<div class="is-full" id="textfoot">
    <p>&copy; Fachschaft MathPhysInfo 2021 &middot; <a href="impressum.html">Impressum</a> &middot; <a href="mailto:aim@mathphys.stura.uni-heidelberg.de">Kontakt</a></p>
</div>
</div>
</body>
</html>
